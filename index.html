<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <title>Szorz√°s gyakorl√≥ ‚Äì neh√©zs√©g + sz√°ml√°l√≥</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      padding: 20px;
      background: #f5f5f7;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      color: #111827;
    }

    .app {
      width: 100%;
      max-width: 520px;
      background: #ffffff;
      padding: 24px 22px 20px;
      border-radius: 18px;
      box-shadow: 0 10px 26px rgba(0,0,0,0.12);
    }

    h1 {
      margin: 0 0 4px;
      font-size: 1.6rem;
      font-weight: 700;
      text-align: center;
    }

    .hint {
      margin: 0 0 14px;
      font-size: 0.85rem;
      color: #6b7280;
      text-align: center;
    }

    .section-label {
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: 4px;
      color: #374151;
    }

    .difficulty-options {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 8px;
      font-size: 0.82rem;
    }

    .difficulty-options label {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 5px 9px;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      cursor: pointer;
      transition: all 0.12s ease;
    }

    .difficulty-options input {
      accent-color: #2563eb;
    }

    .difficulty-options label:hover {
      background: #eff6ff;
      border-color: #bfdbfe;
    }

    .taskcount-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
      font-size: 0.82rem;
      flex-wrap: wrap;
    }

    .taskcount-row select {
      padding: 5px 10px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      font-size: 0.82rem;
      background: #f9fafb;
    }

    .taskcount-row select:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 2px rgba(37,99,235,0.15);
    }

    .status {
      margin-bottom: 6px;
      font-size: 0.85rem;
      color: #4b5563;
      display: flex;
      justify-content: space-between;
      gap: 6px;
      flex-wrap: wrap;
    }

    .status strong {
      font-weight: 700;
    }

    .question-label {
      font-size: 0.85rem;
      font-weight: 500;
      color: #6b7280;
      margin-bottom: 4px;
    }

    .question-box {
      margin: 4px 0 14px;
      padding: 14px 14px;
      border-radius: 14px;
      background: #eff6ff;
      border: 1px solid #bfdbfe;
      display: flex;
      justify-content: center;
      align-items: baseline;
      gap: 6px;
      font-size: 1.8rem;
      font-weight: 700;
      color: #1d4ed8;
    }

    .input-row {
      display: flex;
      gap: 8px;
      margin-bottom: 8px;
      align-items: center;
      flex-wrap: nowrap;
    }

    input[type="number"] {
      flex: 1;
      padding: 9px 10px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      font-size: 1rem;
      text-align: center;
    }

    input[type="number"]:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 2px rgba(37,99,235,0.18);
    }

    button {
      border: none;
      border-radius: 999px;
      padding: 9px 12px;
      font-size: 0.9rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
      transition: all 0.12s ease;
    }

    button.primary {
      background: #2563eb;
      color: #ffffff;
      box-shadow: 0 4px 10px rgba(37,99,235,0.4);
    }

    button.secondary {
      background: #f3f4ff;
      color: #111827;
      border: 1px solid #d1d5db;
      box-shadow: none;
      font-size: 0.8rem;
      padding: 7px 10px;
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 7px 16px rgba(0,0,0,0.18);
    }

    button.secondary:hover {
      box-shadow: 0 4px 10px rgba(0,0,0,0.10);
      background: #e5e7ff;
    }

    button:active {
      transform: translateY(0);
      box-shadow: 0 3px 8px rgba(0,0,0,0.16);
    }

    .feedback {
      min-height: 32px;
      margin-top: 6px;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
    }

    .good {
      color: #16a34a;
      font-weight: 600;
    }

    .bad {
      color: #dc2626;
      font-weight: 600;
    }

    .small {
      font-size: 0.8rem;
      color: #6b7280;
    }

    .fade-in {
      animation: fadeIn 0.2s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(3px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .footer {
      margin-top: 10px;
      font-size: 0.7rem;
      color: #9ca3af;
      text-align: right;
    }
  </style>
</head>
<body>
<div class="app">
  <h1>‚úñÔ∏è Szorz√°s gyakorl√≥</h1>
  <p class="hint">V√°lassz szintet √©s feladatsz√°mot. Oldd meg a p√©ld√°kat, a v√©g√©n megkapod az eredm√©nyedet.</p>

  <div class="section-label">Neh√©zs√©g:</div>
  <div class="difficulty-options">
    <label>
      <input type="radio" name="difficulty" value="easy" checked />
      K√∂nny≈± (1, 2, 4, 5, 10)
    </label>
    <label>
      <input type="radio" name="difficulty" value="medium" />
      K√∂zepes (3, 6)
    </label>
    <label>
      <input type="radio" name="difficulty" value="hard" />
      Neh√©z (7, 8, 9)
    </label>
  </div>

  <div class="taskcount-row">
    <span class="section-label" style="margin:0;">Feladatok sz√°ma a sorozatban:</span>
    <select id="taskCountSelect">
      <option value="10">10</option>
      <option value="20">20</option>
      <option value="30">30</option>
      <option value="40">40</option>
      <option value="50">50</option>
    </select>
    <button class="secondary" id="newSeriesBtn" title="Mindent null√°z √©s √∫j sorozatot ind√≠t.">üîÅ √öj sorozat</button>
  </div>

  <div class="status" id="status">
    <span><strong>Feladat:</strong> 1 / 10</span>
    <span><strong>Helyes:</strong> 0</span>
  </div>

  <div class="question-label">Aktu√°lis feladat:</div>
  <div class="question-box" id="questionBox">
    <span id="a">3</span>
    <span>√ó</span>
    <span id="b">4</span>
    <span>=</span>
    <span>?</span>
  </div>

  <div class="input-row">
    <input type="number" id="answerInput" placeholder="√çrd ide a szorzatot" />
    <button class="primary" id="checkBtn">‚úÖ Ellen≈ërz√©s</button>
  </div>

  <div class="feedback" id="feedback"></div>
  <div class="footer">Minden helyben fut, internet n√©lk√ºl is haszn√°lhat√≥.</div>
</div>

<script>
  const aSpan = document.getElementById('a');
  const bSpan = document.getElementById('b');
  const answerInput = document.getElementById('answerInput');
  const checkBtn = document.getElementById('checkBtn');
  const feedback = document.getElementById('feedback');
  const difficultyRadios = document.querySelectorAll('input[name="difficulty"]');
  const taskCountSelect = document.getElementById('taskCountSelect');
  const statusEl = document.getElementById('status');
  const newSeriesBtn = document.getElementById('newSeriesBtn');

  const sets = {
    easy:  [1, 2, 4, 5, 10],
    medium:[3, 6],
    hard:  [7, 8, 9]
  };

  let currentA = 0;
  let currentB = 0;
  let totalTasks = parseInt(taskCountSelect.value, 10);
  let solved = 0;        // h√°ny feladatot ellen≈ërizt√ºnk m√°r ebben a sorozatban
  let correctCount = 0;  // h√°ny volt helyes
  let finished = false;  // v√©ge van-e a sorozatnak

  function getDifficulty() {
    let value = 'easy';
    difficultyRadios.forEach(r => {
      if (r.checked) value = r.value;
    });
    return value;
  }

  function updateStatus() {
    if (finished) {
      statusEl.innerHTML = `<span><strong>Sorozat v√©ge</strong></span><span><strong>Eredm√©ny:</strong> ${correctCount} / ${totalTasks} helyes</span>`;
    } else {
      const nextIndex = Math.min(solved + 1, totalTasks);
      statusEl.innerHTML =
        `<span><strong>Feladat:</strong> ${nextIndex} / ${totalTasks}</span>` +
        `<span><strong>Helyes:</strong> ${correctCount}</span>`;
    }
  }

  function newQuestion() {
    const diff = getDifficulty();
    const baseSet = sets[diff];

    // Ha m√°r v√©ge a sorozatnak, ne gener√°ljunk √∫j feladatot
    if (finished) return;

    const base = baseSet[Math.floor(Math.random() * baseSet.length)];
    const other = Math.floor(Math.random() * 10) + 1; // 1-10

    if (Math.random() < 0.5) {
      currentA = base;
      currentB = other;
    } else {
      currentA = other;
      currentB = base;
    }

    aSpan.textContent = currentA;
    bSpan.textContent = currentB;
    answerInput.value = "";
    feedback.textContent = "";
    feedback.className = "feedback";
    updateStatus();
    answerInput.focus();
  }

  function endSeriesMessage() {
    feedback.innerHTML =
      `<span class="small">Sorozat v√©get √©rt.</span> ` +
      `<span class="good">Eredm√©nyed: ${correctCount} / ${totalTasks} helyes.</span> ` +
      `<span class="small">Kattints az ‚Äû√öj sorozat‚Äù gombra az √∫jrakezd√©shez.</span>`;
    feedback.className = "feedback fade-in";
  }

  function checkAnswer() {
    if (finished) {
      endSeriesMessage();
      return;
    }

    const userValue = answerInput.value.trim();
    if (userValue === "") {
      feedback.textContent = "√çrd be a v√°laszt!";
      feedback.className = "feedback bad fade-in";
      return;
    }

    const correct = currentA * currentB;
    const userNumber = Number(userValue);

    if (!Number.isFinite(userNumber)) {
      feedback.textContent = "K√©rlek, sz√°mot √≠rj be.";
      feedback.className = "feedback bad fade-in";
      return;
    }

    solved++;

    if (userNumber === correct) {
      correctCount++;
      feedback.innerHTML = `<span class="good">‚úÖ Helyes!</span> <span class="small">(${currentA} √ó ${currentB} = ${correct})</span>`;
    } else {
      feedback.innerHTML = `<span class="bad">‚ùå Nem j√≥.</span> <span class="small">A helyes eredm√©ny: ${currentA} √ó ${currentB} = ${correct}.</span>`;
    }
    feedback.className = "feedback fade-in";

    if (solved >= totalTasks) {
      finished = true;
      updateStatus();
      // hagyjuk l√°tni az utols√≥ feladat visszajelz√©s√©t
      setTimeout(endSeriesMessage, 200);
    } else {
      updateStatus();
      setTimeout(newQuestion, 800);
    }
  }

  function resetSeries() {
    totalTasks = parseInt(taskCountSelect.value, 10);
    solved = 0;
    correctCount = 0;
    finished = false;
    feedback.textContent = "";
    feedback.className = "feedback";
    updateStatus();
    newQuestion();
  }

  checkBtn.addEventListener('click', checkAnswer);

  answerInput.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      e.preventDefault();
      checkAnswer();
    }
  });

  difficultyRadios.forEach(radio => {
    radio.addEventListener('change', () => {
      // neh√©zs√©g v√°lt√°s: √∫j sorozatot kezd√ºnk automatikusan az √∫j be√°ll√≠t√°ssal
      resetSeries();
    });
  });

  taskCountSelect.addEventListener('change', () => {
    // feladatsz√°m v√°ltoztat√°skor √∫j sorozat indul az √∫j √©rt√©kkel
    resetSeries();
  });

  newSeriesBtn.addEventListener('click', () => {
    resetSeries();
  });

  // Ind√≠t√°skor els≈ë sorozat
  resetSeries();
</script>
</body>
</html>